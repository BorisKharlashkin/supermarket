:root{
  --cell: 64px;             
  --gap: 6px;                
  --green-1:#0f6b4d;
  --green-2:#104735;
  --bg:#e9f6ea;
  --grid:#cfe3d0;
  --tile:#dff0e0;
  --shadow: 0 8px 18px rgba(0,0,0,.12);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Color Emoji", "Apple Color Emoji", sans-serif;
  background: #0a291f;
  color: #0e1a14;
}

.app{
  display:flex;
  min-height:100svh;
  flex-direction:column;
}

.topbar{
  color:#eafff6;
  background: linear-gradient(180deg, #0d3b2d, #174b39);
  padding:16px 20px;
  border-bottom: 4px solid #0c3a2e;
}
.topbar h1{margin:0; font-weight:800; font-size:22px; letter-spacing:.2px}
.subtitle{margin:4px 0 0; opacity:.85; font-size:14px}

.stage{
  display:grid;
  grid-template-columns: minmax(320px, 2fr) minmax(380px, 1.2fr);
  gap: 16px;
  padding:16px;
  background: #0c3a2e;
  flex:1 1 auto;
}


.basket{
  position:relative;
  background: var(--bg);
  border-radius: 16px;
  padding: 18px;
  box-shadow: inset 0 0 0 12px #0c3a2e, var(--shadow);
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
}


.basket-wire{
  position:absolute; inset:12px;
  border-radius:14px;
  box-shadow: inset 0 0 0 6px var(--green-2), inset 0 0 0 14px var(--green-1);
  pointer-events:none;
}


.grid{
  width: calc(var(--cell) * attr(data-cols number, 10));
  height: calc(var(--cell) * attr(data-rows number, 8));
}


.basket{
  --cols: 10;
  --rows: 8;
}
.basket .grid{
  width: calc(var(--cell) * var(--cols));
  height: calc(var(--cell) * var(--rows));
  background:
    linear-gradient(#0000 calc(var(--cell) - 1px), var(--grid) 0) 0 0/100% var(--cell),
    linear-gradient(90deg, #0000 calc(var(--cell) - 1px), var(--grid) 0) 0 0/var(--cell) 100%,
    var(--tile);
  border-radius: 10px;
  box-shadow: inset 0 0 0 6px #86caa2;
}


.placed{
  position:absolute;
 
  width: calc(var(--cell) * var(--cols));
  height: calc(var(--cell) * var(--rows));
  pointer-events:none;
}


.inventory{
  background: #123a2b;
  color:#e7fff6;
  border-radius:16px;
  padding:16px;
  box-shadow: var(--shadow);
  display:flex; flex-direction:column;
}
.inv-title{
  margin:0 0 10px 0; font-size:16px; font-weight:700; letter-spacing:.3px;
}
.pieces{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:12px;
}



.piece{
  --w: 1;       
  --h: 1;       
  position:relative;
  display:grid;
  place-items:center;
  width: calc(var(--cell) * var(--w));
  height: calc(var(--cell) * var(--h));
  border-radius:10px;
  border:3px solid rgba(0,0,0,.08);
  box-shadow: var(--shadow);
  cursor:grab;
  user-select:none;
  background:
    linear-gradient(#ffffffaa, #ffffff55),
    repeating-linear-gradient(0deg, #0000 0 calc(var(--cell) - 1px), #ffffff66 calc(var(--cell) - 1px) var(--cell)),
    repeating-linear-gradient(90deg, #0000 0 calc(var(--cell) - 1px), #ffffff66 calc(var(--cell) - 1px) var(--cell));
  color:#05281e;
  transition: transform .1s ease;
}
.piece:active{cursor:grabbing; transform:scale(.98)}
.piece .emoji{font-size: clamp(18px, 3.6vmin, 28px)}
.piece .label{
  position:absolute; inset:auto 6px 6px 6px;
  display:block; text-align:center; font-size:12px; opacity:.9;
  line-height:1.1
}


.piece.bread{ background-color:#ffe6b0 }
.piece.milk{ background-color:#e7f0ff }
.piece.cheese{ background-color:#fff7c4 }
.piece.can{ background-color:#f0f6ff }
.piece.chicken{ background-color:#ffe0d6 }
.piece.bottle{ background-color:#e8f7ef }
.piece.mayo{ background-color:#f5f7fb }
.piece.fruit{ background-color:#fff1da }
.piece.fish{ background-color:#e6fbff }


.legend{
  display:flex; align-items:center; gap:10px;
  margin-top:14px; opacity:.9; font-size:13px;
}
.legend .cell{
  width:var(--cell); height:var(--cell);
  background:
    linear-gradient(#0000 calc(var(--cell) - 1px), #b5d8bd 0) 0 0/100% var(--cell),
    linear-gradient(90deg,#0000 calc(var(--cell) - 1px), #b5d8bd 0) 0 0/var(--cell) 100%,
    #dff0e0;
  border-radius:6px; box-shadow:inset 0 0 0 3px #86caa2;
}


.footer{
  padding:10px 16px; background:#0d3b2d; color:#9ed7c0; border-top:4px solid #0c3a2e;
}


@media (max-width: 1100px){
  :root{ --cell: 56px }     
}
@media (max-width: 900px){
  :root{ --cell: 50px }     
  .stage{ grid-template-columns: 1fr }
  .inventory{ order:2 }
  .basket{ order:1; min-height: 55vh }
  .pieces{ grid-template-columns: repeat(3, minmax(0, 1fr)); justify-items:center }
}
@media (max-width: 520px){
  :root{ --cell: 44px }  
}

.placed{ pointer-events:auto; }


.piece.dragging{ outline:3px dashed #5aa38d }
.piece.valid{ box-shadow: 0 0 0 3px #3fd28a66, var(--shadow); }
.piece.invalid{ box-shadow: 0 0 0 3px #e3515166, var(--shadow); filter:saturate(.8) }
.piece.locked{ outline:none }


.inventory .piece.used{ opacity:.5; filter:grayscale(.15); cursor:not-allowed }

.actions{
  margin-top:14px;
  display:flex;
  gap:8px;
}

.btn{
  appearance:none;
  border:0;
  border-radius:12px;
  padding:12px 14px;
  font-weight:700;
  letter-spacing:.2px;
  box-shadow: var(--shadow);
  cursor:pointer;
  background:#134232;
  color:#e9fff7;
  transition: transform .06s ease, filter .12s ease, opacity .12s ease;
}
.btn:active{ transform: translateY(1px) }
.btn:disabled{ opacity:.55; cursor:not-allowed }

.btn.danger{
  background:#e35151;
  color:#fff;
}
.btn.danger:hover:not(:disabled){ filter: brightness(1.05) }

html, body { height: 100svh; overflow: hidden; }


.app{ height:100svh; display:flex; flex-direction:column; }
.stage{ flex:1 1 auto; min-height:0; overflow:hidden; }


.inventory{ max-height:100%; overflow:auto; }


.basket{ padding:12px; }              
.basket-wire{ inset:8px; }            




.inventory{
  overflow-y: auto;
  overflow-x: hidden;  
  min-width: 0;
}


.pieces{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  align-items:flex-start;
  align-content:flex-start;
  max-width:100%;
}


.piece{
  flex:0 0 auto;
  width:  calc(var(--cell) * var(--w));
  height: calc(var(--cell) * var(--h));
  box-sizing:border-box;
}

.piece .label{ white-space:nowrap }
.stage{ min-width:0 } 


.placed{ z-index: 1; }


.basket-controls{
  position:absolute;
  right:30px;
  bottom:30px;
  z-index: 3;
  display:flex;
  gap:8px;
  pointer-events:auto;
}


.basket-controls .btn{
  padding:10px 12px;
  border-radius:10px;
}


@media (max-width: 520px){
  .basket-controls .btn{ padding:8px 10px; font-size:14px }
}


.basket{ overflow: visible; }


.basket{
  --gridW: calc(var(--cell) * var(--cols));
  --gridH: calc(var(--cell) * var(--rows));
  --stroke: clamp(10px, calc(var(--cell) * 0.22), 16px);
  --wheel:  clamp(22px, calc(var(--cell) * 0.60), 36px);
}

.cart-decor{
  position:absolute;
 
  left: calc(50% - var(--gridW) / 2);
  top:  calc(50% - var(--gridH) / 2);
  width:  var(--gridW);
  height: var(--gridH);
  pointer-events:none; 
  z-index: 2;          
}


.cart-decor .axle{
  position:absolute;
  left: 8%;
  width: 84%;
  height: var(--stroke);
  bottom: calc(-1 * var(--stroke) * 1.2);
  background:#0f4b37;
  border-radius: calc(var(--stroke) / 2);
  box-shadow: inset 0 2px 0 #11553f;
}


.cart-decor .wheel{
  position:absolute;
  width: var(--wheel);
  height: var(--wheel);
  bottom: calc(-1 * var(--wheel) - var(--stroke) * 1.5);
  background:#0d3b2d;
  border-radius: 50%;
  box-shadow:
    inset 0 10px 12px rgba(0,0,0,.22),
    0 2px 0 #0a2d23;
}
.cart-decor .wheel.w1{ left: 16%; }
.cart-decor .wheel.w2{ right: 16%; }


.cart-decor .handle{
  position:absolute;
  right: calc(-1 * var(--stroke) * 1.2);
  top:   calc(-1 * var(--stroke) * 4);
  width: var(--stroke);
  height: calc(var(--cell) * 2.3);
  background:#0f4b37;
  border-radius: calc(var(--stroke) * 0.6);
  box-shadow: inset 0 2px 0 #11553f;
}


.basket-controls{ z-index: 4; }

/* Фиксированный логотип в правом верхнем углу */
.brand-logo{
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 10000;           /* выше всего UI */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  padding: 6px 8px;
}
.brand-logo img{
  display: block;
  height: 36px;             /* регулируй размер логотипа здесь */
  width: auto;
  object-fit: contain;
}

/* На узких экранах делаем логотип компактнее */
@media (max-width: 520px){
  .brand-logo{ padding: 4px 6px }
  .brand-logo img{ height: 28px }
}

/* Баннер победы */
.win-banner{
  position:absolute; inset:0;
  display:none; place-items:center;
  z-index:12; /* выше плиток и кнопок */
}
.win-banner.show{ display:grid; }
.win-banner::before{
  content:""; position:absolute; inset:0;
  background: rgba(13,59,45,.62); /* зелёный полупрозрачный фон */
  backdrop-filter: blur(2px);
}

.win-card{
  position:relative;
  width:min(92%, 380px);
  padding:20px 22px;
  border-radius:16px;
  background: linear-gradient(#123a2b, #174b39);
  color:#e7fff6;
  border:3px solid #86caa2;
  box-shadow: 0 18px 44px rgba(0,0,0,.28);
  text-align:center;
}
.win-title{ font-weight:800; font-size:18px; letter-spacing:.2px; margin-bottom:6px }
.win-text{ opacity:.9; margin:0 0 12px 0; font-size:14px }

.win-actions{ display:flex; justify-content:center; gap:10px }
.btn.outline{
  background:transparent;
  border:2px solid #86caa2;
  color:#e7fff6;
}
